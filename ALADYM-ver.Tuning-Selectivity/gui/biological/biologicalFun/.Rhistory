mat(ple4) # maturità
m(ple4) # mortalità naturale
catch.wt(ple4) # in kg, pesi medi individuali per età e anno
stock.wt(ple4)
data(ple4.indices)
index(ple4.indices)
# output del modello di stock assessment
stock.n(ple4)
harvest(ple4) # fishing mortality
summary(ple4)
summary(ple4.indices)
plot(ple4)
# Metodo semplificato, senza tuning su indici
vpa_res <- VPA(ple4, fratio=1.0, fit.plusgroup=TRUE)
?VPA
# Parametri:
# - fratio: proporzione tra F terminale e F all’età precedente (F-1) (default = 1.0)
# - fit.plusgroup: se TRUE, calcola la plus group
plot(vpa_res)
summary(vpa_res)
ctrl <- FLXSA.control(
maxit = 100, # numero massimo di iterazioni
tol = 1e-09, # tolleranza per la convergenza
rage = 0, # età in cui inizia la stima della catchability
qage = 10, # età in cui termina la catchability
fse = 0.5, # shrinkage su F (0 = no shrinkage, 1 = pieno)
min.nse = 0.3, # errore standard minimo su abundanze relative
shk.n = TRUE, # shrinkage sugli abbondanze
shk.f = TRUE, # shrinkage su F
shk.yrs = 3, # anni da usare per stimare shrinkage
window = 6, # finestra temporale per il modello
tsrange = 0 # uso dell'intera serie temporale
)
xsa_res <- FLXSA(
stock = ple4,
indices = ple4.indices,
control = ctrl,
# desc = "Esecuzione avanzata XSA",
diag.flag = TRUE
)
stock.n(ple4)
harvest(ple4) # fishing mortality
summary(ple4)
summary(ple4.indices)
plot(ple4)
# Metodo semplificato, senza tuning su indici
vpa_res <- VPA(ple4, fratio=1.0, fit.plusgroup=TRUE)
?VPA
# Parametri:
# - fratio: proporzione tra F terminale e F all’età precedente (F-1) (default = 1.0)
# - fit.plusgroup: se TRUE, calcola la plus group
plot(vpa_res)
summary(vpa_res)
ctrl <- FLXSA.control(
maxit = 100, # numero massimo di iterazioni
tol = 1e-09, # tolleranza per la convergenza
rage = 0, # età in cui inizia la stima della catchability
qage = 10, # età in cui termina la catchability
fse = 0.5, # shrinkage su F (0 = no shrinkage, 1 = pieno)
min.nse = 0.3, # errore standard minimo su abundanze relative
shk.n = TRUE, # shrinkage sugli abbondanze
shk.f = TRUE, # shrinkage su F
shk.yrs = 3, # anni da usare per stimare shrinkage
window = 6, # finestra temporale per il modello
tsrange = 0 # uso dell'intera serie temporale
)
xsa_res <- FLXSA(
stock = ple4,
indices = ple4.indices,
control = ctrl,
# desc = "Esecuzione avanzata XSA",
diag.flag = TRUE
)
ctrl <- FLXSA.control(
maxit = 100, # numero massimo di iterazioni
tol = 1e-09, # tolleranza per la convergenza
rage = 0, # età in cui inizia la stima della catchability
qage = 10, # età in cui termina la catchability
fse = 0.5, # shrinkage su F (0 = no shrinkage, 1 = pieno)
min.nse = 0.3, # errore standard minimo su abundanze relative
shk.n = TRUE, # shrinkage sugli abbondanze
shk.f = TRUE, # shrinkage su F
shk.yrs = 3, # anni da usare per stimare shrinkage
window = 5, # finestra temporale per il modello
tsrange = 0 # uso dell'intera serie temporale
)
xsa_res <- FLXSA(
stock = ple4,
indices = ple4.indices,
control = ctrl,
# desc = "Esecuzione avanzata XSA",
diag.flag = TRUE
)
ctrl <- FLXSA.control(
maxit = 100, # numero massimo di iterazioni
tol = 1e-09, # tolleranza per la convergenza
rage = 0, # età in cui inizia la stima della catchability
qage = 10, # età in cui termina la catchability
fse = 0.5, # shrinkage su F (0 = no shrinkage, 1 = pieno)
min.nse = 0.3, # errore standard minimo su abundanze relative
shk.n = TRUE, # shrinkage sugli abbondanze
shk.f = TRUE, # shrinkage su F
shk.yrs = 3, # anni da usare per stimare shrinkage
#window = 5, # finestra temporale per il modello
tsrange = 0 # uso dell'intera serie temporale
)
xsa_res <- FLXSA(
stock = ple4,
indices = ple4.indices,
control = ctrl,
# desc = "Esecuzione avanzata XSA",
diag.flag = TRUE
)
range(ple4)
range(ple4.indices)
# Riduci lo stock al periodo coperto dagli indici
ple4_trim <- window(ple4, start=1970, end=1995)
xsa_res <- FLXSA(
stock = ple4_trim,
indices = ple4.indices,
control = ctrl,
# desc = "Esecuzione avanzata XSA",
diag.flag = TRUE
)
max.year(ple4_trim)
maxyear(ple4_trim)
summary(ple4_trim)
ctrl <- FLXSA.control(
maxit = 100, # numero massimo di iterazioni
tol = 1e-09, # tolleranza per la convergenza
rage = 1, # età in cui inizia la stima della catchability
qage = 5, # età in cui termina la catchability
fse = 0.5, # shrinkage su F (0 = no shrinkage, 1 = pieno)
min.nse = 0.3, # errore standard minimo su abundanze relative
shk.n = TRUE, # shrinkage sugli abbondanze
shk.f = TRUE, # shrinkage su F
shk.yrs = 3, # anni da usare per stimare shrinkage
#window = 5, # finestra temporale per il modello
tsrange = 0 # uso dell'intera serie temporale
)
# Riduci lo stock al periodo coperto dagli indici
ple4_trim <- window(ple4, start=1970, end=1995)
summary(ple4_trim)
xsa_res <- FLXSA(
stock = ple4_trim,
indices = ple4.indices,
control = ctrl,
# desc = "Esecuzione avanzata XSA",
diag.flag = TRUE
)
ctrl <- FLXSA.control(
maxit = 100, # numero massimo di iterazioni
tol = 1e-09, # tolleranza per la convergenza
rage = 1, # età in cui inizia la stima della catchability
qage = 5, # età in cui termina la catchability
fse = 0.5, # shrinkage su F (0 = no shrinkage, 1 = pieno)
min.nse = 0.3, # errore standard minimo su abundanze relative
shk.n = TRUE, # shrinkage sugli abbondanze
shk.f = TRUE, # shrinkage su F
shk.yrs = 3, # anni da usare per stimare shrinkage
#window = 5, # finestra temporale per il modello
tsrange = c(1970, 1995) # uso dell'intera serie temporale
)
# Riduci lo stock al periodo coperto dagli indici
ple4_trim <- window(ple4, start=1970, end=1995)
summary(ple4_trim)
xsa_res <- FLXSA(
stock = ple4_trim,
indices = ple4.indices,
control = ctrl,
# desc = "Esecuzione avanzata XSA",
diag.flag = TRUE
)
summary(xsa_res)
# Controlla fit, residui, convergence
diagnostics(xsa_res)
xsa_res <- FLXSA(
stock = ple4_trim,
indices = ple4.indices,
control = ctrl,
# desc = "Esecuzione avanzata XSA",
diag.flag = TRUE
)
ctrl <- FLXSA.control(
maxit = 100, # numero massimo di iterazioni
tol = 1e-09, # tolleranza per la convergenza
rage = 1, # età in cui inizia la stima della catchability
qage = 5, # età in cui termina la catchability
fse = 0.5, # shrinkage su F (0 = no shrinkage, 1 = pieno)
min.nse = 0.3, # errore standard minimo su abundanze relative
shk.n = TRUE, # shrinkage sugli abbondanze
shk.f = TRUE, # shrinkage su F
shk.yrs = 3, # anni da usare per stimare shrinkage
#window = 5, # finestra temporale per il modello
tsrange = c(1970, 1995) # uso dell'intera serie temporale
)
# Riduci lo stock al periodo coperto dagli indici
ple4_trim <- window(ple4, start=1970, end=1995)
summary(ple4_trim)
xsa_res <- FLXSA(
stock = ple4_trim,
indices = ple4.indices,
control = ctrl,
# desc = "Esecuzione avanzata XSA",
diag.flag = TRUE
)
xsa_res <- FLXSA(
stock = ple4_trim,
indices = ple4.indices,
#control = ctrl,
# desc = "Esecuzione avanzata XSA",
#diag.flag = TRUE
)
xsa_res <- FLXSA(
stock = ple4,
indices = ple4.indices,
#control = ctrl,
# desc = "Esecuzione avanzata XSA",
#diag.flag = TRUE
)
summary(ple4.indices)
index(ple4.indices)[[1]]
index(ple4.indices)[[2]]
index(ple4.indices)[[3]]
summary(ple4)
ple4_index_trim <- ple4.indices[[3]]
# Riduci lo stock al periodo coperto dagli indici
ple4_trim <- window(ple4, start=1970, end=2017)
ple4_index_trim <- ple4.indices[[3]]
xsa_res <- FLXSA(
stock = ple4_trim,
indices = ple4_index_trim,
#control = ctrl,
# desc = "Esecuzione avanzata XSA",
#diag.flag = TRUE
)
xsa_res <- FLXSA(
stock = ple4_trim,
indices = ple4_index_trim
#control = ctrl,
# desc = "Esecuzione avanzata XSA",
#diag.flag = TRUE
)
ple4_trim
ple4_index_trim
ple4_trim <- window(ple4, start=1970, end=2017)
ple4_index_trim <- ple4.indices[[3]]
summary(ple4_trim)
xsa_res <- FLXSA(
stock = ple4_trim,
indices = ple4_index_trim
#control = ctrl,
# desc = "Esecuzione avanzata XSA",
#diag.flag = TRUE
)
dimnames(ple4_index_trim)$year
dimnames(catch.n(ple4_trim))$age
dimnames(catch.n(ple4_index_trim))$age
plot(catch.n(ple4_index_trim))
catch.n(ple4_index_trim)
# Estrai il catch.n (matrice FLQuant)
cn <- catch.n(ple4_index_trim)
# Sostituisci gli zeri con 0.0001
cn[cn == 0] <- 0.0001
# Assegna di nuovo a catch.n dell'oggetto
catch.n(ple4_index_trim) <- cn
xsa_res <- FLXSA(
stock = ple4_trim,
indices = ple4_index_trim
#control = ctrl,
# desc = "Esecuzione avanzata XSA",
#diag.flag = TRUE
)
catch.n(ple4_index_trim)
h.n dell'oggetto
# Riduci lo stock al periodo coperto dagli indici
ple4_trim <- window(ple4, start=1970, end=2017)
ple4_index_trim <- ple4.indices[[3]]
# Estrai il catch.n (matrice FLQuant)
cn <- catch.n(ple4_index_trim)
# Sostituisci gli zeri con 0.0001
cn[cn == 0] <- 0.0001
cn[is.na(cn)] <- 0.0001
# Assegna di nuovo a catch.n dell'oggetto
catch.n(ple4_index_trim) <- cn
summary(ple4_trim)
xsa_res <- FLXSA(
stock = ple4_trim,
indices = ple4_index_trim
#control = ctrl,
# desc = "Esecuzione avanzata XSA",
#diag.flag = TR
xsa_res <- FLXSA(
# Riduci lo stock al periodo coperto dagli indici
ple4_trim <- window(ple4, start=1970, end=2017)
ple4_index_trim <- ple4.indices[[3]]
# Estrai il catch.n (matrice FLQuant)
cn <- catch.n(ple4_index_trim)
# Sostituisci gli zeri con 0.0001
cn[cn == 0] <- 0.0001
cn[is.na(cn)] <- 0.0001
# Assegna di nuovo a catch.n dell'oggetto
catch.n(ple4_index_trim) <- cn
catch.n(ple4_index_trim)
summary(ple4_trim)
xsa_res <- FLXSA(
stock = ple4_trim,
indices = ple4_index_trim
#control = ctrl,
# desc = "Esecuzione avanzata XSA",
#diag.flag = TRUE
)
ctrl <- FLXSA.control(
rage = 1,  # età minima per stimare q
qage = 7,  # età massima coperta dall'indice
maxit = 100,
tol = 1e-9,
fse = 0.5,
min.nse = 0.3,
shk.n = TRUE,
shk.f = TRUE,
shk.yrs = 3,
tsrange = 0
)
# Riduci lo stock al periodo coperto dagli indici
ple4_trim <- window(ple4, start=1970, end=2017)
ple4_index_trim <- ple4.indices[[3]]
# Estrai il catch.n (matrice FLQuant)
cn <- catch.n(ple4_index_trim)
# Sostituisci gli zeri con 0.0001
cn[cn == 0] <- 0.0001
cn[is.na(cn)] <- 0.0001
# Assegna di nuovo a catch.n dell'oggetto
catch.n(ple4_index_trim) <- cn
summary(ple4_trim)
xsa_res <- FLXSA(
stock = ple4_trim,
indices = ple4_index_trim
control = ctrl,
xsa_res <- FLXSA(
stock = ple4_trim,
indices = ple4_index_trim
control = ctrl
xsa_res <- FLXSA(
stock = ple4_trim,
indices = ple4_index_trim,
control = ctrl
# desc = "Esecuzione avanzata XSA",
#diag.flag = TRUE
)
ple4_trim
ple4_index_trim
catch.n(ple4_trim)
all(dimnames(catch.n(ple4_trim))$year == dimnames(catch.n(ple4_index_trim))$year)
all(dimnames(catch.n(ple4_trim))$age %in% dimnames(catch.n(ple4_index_trim))$age)
dimnames(catch.n(ple4_index_trim))$age
dimnames(catch.n(ple4_index_trim))$year
clean_FLQuant <- function(x) {
x[is.na(x)] <- 0.0001
x[x < 0] <- 0.0001
return(x)
}
# Pulizia dati nel stock
catch.n(ple4_trim) <- clean_FLQuant(catch.n(ple4_trim))
stock.n(ple4_trim) <- clean_FLQuant(stock.n(ple4_trim))
# Pulizia dati nell'indice
catch.n(ple4_index_trim) <- clean_FLQuant(catch.n(ple4_index_trim))
index.q(ple4_index_trim) <- clean_FLQuant(index.q(ple4_index_trim))
xsa_res <- FLXSA(
stock = ple4_trim,
indices = ple4_index_trim,
control = ctrl,
diag.flag = TRUE
)
catch(ple4)
catch.n(ple4)
source("C:/Users/Nazareno Campioni/BEMTOOL-2.6/BEMTOOL.r", echo = TRUE)
source("C:/Users/Nazareno Campioni/BEMTOOL-2.6/BEMTOOL.r", echo = TRUE)
source("C:/Users/Nazareno Campioni/BEMTOOL-2.6/BEMTOOL.r", echo = TRUE)
mut <- read.csv("C:\\Users\\Nazareno Campioni\\Desktop\\INPUT\\LANDINGS\\MUT1718.csv")
View(mut)
View(mut)
mut <- read.csv("C:\\Users\\Nazareno Campioni\\Desktop\\INPUT\\LANDINGS\\MUT1718.csv", sep=";")
summary(mut[1])
summary(mut[2])
summary(mut[3])
summary(mut[4])
summary(mut[2])
summary(mut[2,2])
mut[2,2]
View(mut)
mut[2,1]
mut[1,2]
mut[1,2:]
mut[1,2,]
mut[1]
mut[2]
mut[1,2]
mut[1,22]
mut[1,2:]
mut[1,2:30]
length(mut)
mut[1,2:length(mut)]
unique(mut[1,2:length(mut)])
length(unique(mut[1,2:length(mut)]))
(mut[1,2:length(mut)])
mut[1,2:length(mut)][1]
mut[1,2:length(mut)][2]
mut[1,2:length(mut)][1,1]
mut[1,2:length(mut)][1,]
mut[1,2:length(mut)][,1]
transpose(mut)
?transpose
??transpose
data.table::transpose(mut)
tum <- data.table::transpose(mut)
View(tum)
unique(tum$V1)
source("C:/Users/Nazareno Campioni/BEMTOOL-2.6/BEMTOOL.r", echo = TRUE)
source("C:/Users/Nazareno Campioni/BEMTOOL-2.6/BEMTOOL.r", echo = TRUE)
source("C:/Users/Nazareno Campioni/BEMTOOL-2.6/src/biol/bmtALADYM/ALADYM-ver12.3-2017_0501/ALADYM.r", echo = TRUE)
source("C:/Users/Nazareno Campioni/BEMTOOL-2.6/src/biol/bmtALADYM/ALADYM-ver12.3-2017_0501/ALADYM.r", echo = TRUE)
setwd("C:\\Users\\Nazareno Campioni\\ALADYM-ver12.3-2017_0501")
dir()
cd src
cd '\\src'
source("C:/Users/Nazareno Campioni/ALADYM-ver12.3-2017_0501/ALADYM.r", echo = TRUE)
setBiologicalParams
ls(envir = globalenv())
!exists("phase")
exists("phase")
phase
IN_BEMTOOL
ALADYM_home
GLO
source(paste(ALADYM_home,"/gui/guicontrols/generalControls/change_startend_year.r", sep=""))
change_startend_year.r
change_startend_year
?`@`
FLEETSEGMENTS_names
scenario_fold
traceback()
loca_FSelection_sim_temp <- SGEAR(INP$OPT_SG_TYPE[loca_irun +
1, g], INP$param1[loca_irun + 1, g], INP$param2[loca_irun +
1, g], INP$param3[loca_irun + 1, g], INP$param4[loca_irun +
1, g], INP$param5[loca_irun + 1, g], BAS$FLength)
first_age_mal
as.numeric(gtkEntryGetText(entryVBF_M_lifespan))
n_ages
FF_matrix
as.numeric(new_aldPopulation@lifespan[1,1])
as.numeric(gtkEntryGetText(entryVBF_M_lifespan))
gtkEntryGetText
entryVBF_M_lifespan
Tr
source("C:/Users/Nazareno Campioni/ALADYM-ver12.3-2017_0501/gui/fishery/fishingmortalityFun/reload_fishingmortalityM.r", echo = TRUE)
source("C:/Users/Nazareno Campioni/ALADYM-ver12.3-2017_0501/ALADYM.r", echo = TRUE)
traceback()
# In RStudio:
.rs.restartR()
# Or in base R: close and reopen the session.
getwd()
getwd()
list.files("C:/Users/Nazareno Campioni/ALADYM-ver12.3-2017_0501", recursive=TRUE,
pattern = "setBiologicalParams.r", full.names = TRUE)
source("C:/Users/Nazareno Campioni/ALADYM-ver12.3-2017_0501/gui/utilities/setBiologicalParams.r")
source("C:/Users/Nazareno Campioni/ALADYM-ver12.3-2017_0501/gui/biological/biologicalFun/setBiologicalParams.r")
# verify
print(body(setBiologicalParams))
loca_Fertility
showCompTime
getwd()
# in the folder where SIMULATION_EXPLOITED.r exists:
file <- "C:/Users/Nazareno Campioni/Desktop/simulation_EXPLOITED.r"
grep("-?Z\\s*<-", file = file, value = TRUE)            # total mortality
# in the folder where SIMULATION_EXPLOITED.r exists:
file <- "C:/Users/Nazareno Campioni/Desktop/simulation_EXPLOITED.r"
grep("-?Z\\s*<-", file, value = TRUE)            # total mortality
grep("exp\\(-Z", file, value = TRUE)             # survivorship
grep("Catch\\s*<-", file, value = TRUE)          # exact catch calc lines
grep("Baranov|baranov", file, value = TRUE, ignore.case = TRUE)
grep("Von.*Bertalanffy|Linf|t0|k", file, value = TRUE, ignore.case = TRUE)
grep("Beverton|Ricker|stock.*recruit", file, value = TRUE, ignore.case = TRUE)
grep("SSB|spawning", file, value = TRUE, ignore.case = TRUE)
# in the folder where SIMULATION_EXPLOITED.r exists:
file <- "C:\\Users\\Nazareno Campioni\\Desktop\\simulation_EXPLOITED.r"
grep("-?Z\\s*<-", file, value = TRUE)            # total mortality
grep("exp\\(-Z", file, value = TRUE)             # survivorship
grep("Catch\\s*<-", file, value = TRUE)          # exact catch calc lines
grep("Baranov|baranov", file, value = TRUE, ignore.case = TRUE)
grep("Von.*Bertalanffy|Linf|t0|k", file, value = TRUE, ignore.case = TRUE)
grep("Beverton|Ricker|stock.*recruit", file, value = TRUE, ignore.case = TRUE)
grep("SSB|spawning", file, value = TRUE, ignore.case = TRUE)
attr(setBiologicalParams, "srcref")
environmentName(environment(setBiologicalParams))
getAnywhere("setBiologicalParams")
rm(list = ls(all.names = TRUE))
gc()
setwd("C:/Users/Nazareno Campioni/ALADYM-ver12.3-2017_0501/src")
source("setBiologicalParams.r", chdir = TRUE)
setwd("C:/Users/Nazareno Campioni/ALADYM-ver12.3-2017_0501/gui/biological/biologicalFUN")
source("setBiologicalParams.r", chdir = TRUE)
getSrcref(setBiologicalParams)
body(setBiologicalParams)[20:60]  # print first lines to confirm edits
getSrcref(setBiologicalParams)
body(setBiologicalParams)[40:50]  # print first lines to confirm edits
ALADYM_home
getSrcref(setBiologicalParams)
body(setBiologicalParams)  # print first lines to confirm edits
getSrcref(setBiologicalParams)
body(setBiologicalParams)[40:50]  # print first lines to confirm edits
getAnywhere(setBiologicalParams)
